---
title: LVS之原理篇--深入全面理解LVS工作原理
tags: LVS,负载均衡,四层
grammar_cjkRuby: true
---

# 1.介绍
LVS是Linux Virtual Server的简写，即Linux虚拟服务器，是一个虚拟的服务器集群系统。该项目由章文嵩博士成立，是中国国内最早出现的自由软件项目之一。
使用LVS技术要达到的目标是：通过LVS提供的负载均衡技术和Linux操作系统实现一个高性能、高可用的服务器群集，它具有良好可靠性、可扩展性和可操作性。从而以低廉的成本实现最优的服务性能。
负载均衡技术有很多实现方案，如==基于DNS域名轮流解析的方法==、==基于客户端调度访问的方法==、==基于应用层系统负载的调度方法==，还有==基于IP地址的调度方法==，在这些负载调度算法中，执行效率最高的就是IP负载均衡技术。
LVS的==IP负载均衡技术==是通过ipvs内核模块来实现的。

	ipvs是LVS集群系统的核心软件，它的主要作用是：安装在Director Server上，同时在Director Server上虚拟出一个IP地址，用户必须通过这个虚拟的IP地址访问集群服务。这个虚拟IP一般称为LVS的VIP，即Virtual IP。访问的请求首先经过VIP到达负载调度器，然后由负载调度器从Real Server列表中选取一个服务节点响应用户的请求。当用户的请求到达负载调度器后，调度器如何将请求发送到提供服务的Real Server节点，而Real Server节点如何返回数据给用户，是ipvs实现的重点技术，ipvs实现负载均衡机制有四种，分别是NAT、TUN和DR以及后来经淘宝开发的FullNat。
	
下面将详细介绍这四种机制的工作模型。

